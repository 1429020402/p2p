$(function(){var n=!1,t=!1,a=!1,i=!1;$("#nickname").blur(function(){var s=$("#nickname").val();/^[a-zA-Z0-9_-]{4,16}$/.test(s)?(n=!0,$(this).css("border","1px solid green").siblings("span").html("")):(n=!1,$(this).css("border","1px solid red").siblings("span").html("4到16位（字母，数字，下划线，减号）").css("color","red"))}),$("#email").blur(function(){var s=$("#email").val();/^\w{3,}(\.\w+)*@[A-z0-9]+(\.[A-z]{2,5}){1,2}$/.test(s)?(t=!0,$(this).css("border","1px solid green").siblings("span").html("")):(t=!1,$(this).css("border","1px solid red").siblings("span").html("邮箱格式错误").css("color","red"))}),$("#phone").blur(function(){var s=$("#phone").val();/^1[3456789]\d{9}$/.test(s)?(a=!0,$(this).css("border","1px solid green").siblings("span").html("")):(a=!1,$(this).css("border","1px solid red").siblings("span").html("请输入正确的电话号码").css("color","red"))}),$("#contact_address").blur(function(){var s=$("#contact_address").val();/\S/.test(s)?(i=!0,$(this).css("border","1px solid green").siblings("span").html("")):(i=!1,$(this).css("border","1px solid red").siblings("span").html("地址不能为空").css("color","red"))});var l=localStorage.getItem("ID");$.ajax({url:"http://127.0.0.1:8848/getuserinfo.php",type:"get",data:{id:l},dataType:"json",success:function(s){for(var e in s)$("#username").html(s.username)}}),$("#Btn").click(function(){var s=$("#email").val(),e=$("#phone").val(),r=$("#nickname").val();if(!(a&&t&&n&&i))return $("#email").blur(),$("#phone").blur(),$("#nickname").blur(),$("#contact_address").blur(),!1;$.ajax({url:"http://127.0.0.1:8848/updateuser.php",type:"post",data:{id:l,email:s,phone:e,nickname:r},success:function(s){"ok"===s?(alert("用户资料更新成功"),location.href="/"):alert("更新失败,请稍后再试~~~")}})})});